# Nginxåå‘ä»£ç†é…ç½®
# ç”¨äºç®¡ç†å¤šä¸ªDockeré¡¹ç›®çš„ç»Ÿä¸€å…¥å£

# é»˜è®¤æœåŠ¡å™¨é…ç½®
server {
    listen 80 default_server;
    server_name _;
    
    # é¡¹ç›®ç®¡ç†é¢æ¿é¦–é¡µ
    location / {
        add_header Content-Type text/html;
        return 200 '<html><head><title>Dockerå¤šé¡¹ç›®ç®¡ç†ä¸­å¿ƒ</title><style>body{font-family:Arial;margin:40px;background:#667eea;min-height:100vh}h1{color:#fff;text-align:center}</style></head><body><h1>ğŸ³ Dockerå¤šé¡¹ç›®ç®¡ç†ä¸­å¿ƒ</h1><p style="color:#fff;text-align:center">æ¬¢è¿ä½¿ç”¨Dockerå¤šé¡¹ç›®ç®¡ç†ç³»ç»Ÿ</p><p style="color:#fff;text-align:center">Portainerç®¡ç†: <a href="http://IP:9000" style="color:#ffd700">ç«¯å£9000</a></p></body></html>';
    }
    
    # Portainerç®¡ç†ç•Œé¢ä»£ç†
    location /portainer/ {
        proxy_pass http://portainer:9000/;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
    
    # å¥åº·æ£€æŸ¥ç«¯ç‚¹
    location /health {
        access_log off;
        return 200 "healthy\n";
        add_header Content-Type text/plain;
    }
}

# é¡¹ç›®ä»£ç†é…ç½®ç¤ºä¾‹
# ä¸ºæ¯ä¸ªé¡¹ç›®åˆ›å»ºå•ç‹¬çš„serverå—æˆ–locationå—
# 
# æ–¹å¼1ï¼šå­åŸŸåä»£ç†ï¼ˆæ¨èï¼‰
# server {
#     listen 80;
#     server_name project1.yourdomain.com;
#     
#     location / {
#         proxy_pass http://project1-web:80;
#         proxy_set_header Host $host;
#         proxy_set_header X-Real-IP $remote_addr;
#         proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
#         proxy_set_header X-Forwarded-Proto $scheme;
#     }
# }
#
# æ–¹å¼2ï¼šè·¯å¾„ä»£ç†
# location /project1/ {
#     proxy_pass http://project1-web:80/;
#     proxy_set_header Host $host;
#     proxy_set_header X-Real-IP $remote_addr;
#     proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
#     proxy_set_header X-Forwarded-Proto $scheme;
# }